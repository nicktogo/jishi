{% extends "navbar.html" %}
{% block page_specified %}
    <script src="http://s.codepen.io/assets/libs/modernizr.js" type="text/javascript"></script>
{% endblock %}
{% block page_specified_css %}
    <link rel="stylesheet" href="http://codepen.io/assets/reset/normalize.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/material-searchbar.css') }}"
    <link rel="stylesheet" href="{{ url_for('static', filename='css/material-button.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/message.css') }}">
    <script>
        window.console = window.console || function (t) {
                };
    </script>
{% endblock %}
{% block body %}
    <div id="demo" class="wrapper">
        <div class="sw">
            <form>
                <input type="search" class="search" placeholder="搜索..."/>
                <button class="go"><span class="entypo-search"></span></button>
                <a href="#" class="logo" title="logo"></a>
            </form>
        </div>
        <div class="table-responsive-vertical shadow-z-1">
            <!-- Table starts here -->
            <table id="table" class="table table-hover table-mc-light-blue">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Link</th>
                    <th>Status</th>
                    <th>Button</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td data-title="ID">1</td>
                    <td data-title="Name">Material Design Color Palette</td>
                    <td data-title="Link">
                        <a href="https://github.com/zavoloklom/material-design-color-palette" target="_blank">GitHub</a>
                    </td>
                    <td data-title="Status">Completed</td>
                    <td data-title="Button">
                        <button type="button" class="btn btn-raised ripple-effect btn-default">Approve</button>
                    </td>
                </tr>
                <tr>
                    <td data-title="ID">2</td>
                    <td data-title="Name">Material Design Iconic Font</td>
                    <td data-title="Link">
                        <a href="http://codepen.io/zavoloklom/pen/uqCsB" target="_blank">Codepen</a>
                        <a href="https://github.com/zavoloklom/material-design-iconic-font" target="_blank">GitHub</a>
                    </td>
                    <td data-title="Status">Completed</td>
                    <td data-title="Button">
                        <button type="button" class="btn btn-raised ripple-effect btn-default">Approve</button>
                    </td>
                </tr>
                <tr>
                    <td data-title="ID">3</td>
                    <td data-title="Name">Material Design Hierarchical Display</td>
                    <td data-title="Link">
                        <a href="http://codepen.io/zavoloklom/pen/eNaEBM" target="_blank">Codepen</a>
                        <a href="https://github.com/zavoloklom/material-design-hierarchical-display"
                           target="_blank">GitHub</a>
                    </td>
                    <td data-title="Status">Completed</td>
                    <td data-title="Button">
                        <button type="button" class="btn btn-raised ripple-effect btn-default">Approve</button>
                    </td>
                </tr>
                <tr>
                    <td data-title="ID">4</td>
                    <td data-title="Name">Material Design Sidebar</td>
                    <td data-title="Link"><a href="http://codepen.io/zavoloklom/pen/dIgco" target="_blank">Codepen</a>
                    </td>
                    <td data-title="Status">Completed</td>
                    <td data-title="Button">
                        <button type="button" class="btn btn-raised ripple-effect btn-default">Approve</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#message_alert").addClass("active");
        });
        // Ripple-effect animation
        (function ($) {
            $(".ripple-effect").click(function (e) {
                var rippler = $(this);

                // create .ink element if it doesn't exist
                if (rippler.find(".ink").length == 0) {
                    rippler.append("<span class='ink'></span>");
                }

                var ink = rippler.find(".ink");

                // prevent quick double clicks
                ink.removeClass("animate");

                // set .ink diametr
                if (!ink.height() && !ink.width()) {
                    var d = Math.max(rippler.outerWidth(), rippler.outerHeight());
                    ink.css({
                        height: d,
                        width: d
                    });
                }

                // get click coordinates
                var x = e.pageX - rippler.offset().left - ink.width() / 2;
                var y = e.pageY - rippler.offset().top - ink.height() / 2;

                // set .ink position and add class .animate
                ink.css({
                    top: y + 'px',
                    left: x + 'px'
                }).addClass("animate");
            })
        })(jQuery);
    </script>
{% endblock %}
<script>
    $(function () {
        var types = ["申请", "同意", "退出", "被踢出"];
        //  $('.mes_type').forEach(function(elem){$(this).text(types[Integer.parseInt($(this).text())])})
        //
        //             };
        $('.mes_type').each(function (elem) {
            console.log($(this).text());
            $(this).text(types[parseInt($(this).text())]);
        });
    });

    //     $('#myModal').on('show.bs.modal', function (event) {
    //         var messagetd = $(event.relatedTarget) // Button that triggered the modal
    //         var message = messagetd.data('message') // Extract info from data-* attributes
    //
    <!--var username = message["username"]-->
    //
    <!--var projectname = message["projectname"]-->
    //
    <!--var project_type = message["project_type"]-->
    //         var types = new Array()
    //         types[0]="申请"
    //         types[1]="同意"
    //         types[2]="退出"
    //         types[3]="被踢出"
    //         var type = types[message]
    //         var modal = $(this)
    //         modal.find('.modal-title').text('New message to ' + type)
    //
    // })

    function permit(btn) {
        var message_id = $("#message_id").val();
        var data = {'message_id': message_id}
        $.ajax({
            url: "/project/permit",
            data: JSON.stringify(data),
            contentType: 'application/json',
            type: 'POST',
            dataType: 'json',
            success: function (data) {
                alert(data['message_id'] + "同意申请!")
            },
            error: function (data) {
                console.log(data)
            }
        })

    }
</script>

